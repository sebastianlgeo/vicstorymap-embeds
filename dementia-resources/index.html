<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dementia Resources</title>
  <link rel="stylesheet" href="styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

<div class="page">
  <section class="resources-row">
    <!-- Left resource -->
    <article class="resource">
      <h2>The Canadian Charter of Human Rights for People with Dementia</h2>

      <div class="resource-image-wrapper">
        <img
          src="images/charter.jpg"
          alt="Canadian Charter of Rights for People with Dementia"
          class="zoom-image"
        />
      </div>

      <p class="resource-link">
        https://alzheimer.ca/en/get-involved/change-minds/canadian-charter-rights-people-dementia
      </p>
    </article>

    <!-- Right resource -->
    <article class="resource">
      <h2>Modifiable risk factors for dementia</h2>

      <div class="resource-image-wrapper">
        <img
          src="images/risk-factors.jpg"
          alt="Infographic showing modifiable risk factors for dementia"
          class="zoom-image"
        />
      </div>

      <p class="resource-link">
        https://www.alzint.org/resource/dementia-risk-factors-infographic/
      </p>
    </article>
  </section>
</div> <!-- end .page -->

<!-- Image modal overlay -->
<div class="image-modal-overlay" id="imageModal">
  <div class="image-modal">
    <div class="image-modal-header">
      <div class="zoom-controls">
        <button id="zoomOutBtn" aria-label="Zoom out">−</button>
        <button id="zoomInBtn" aria-label="Zoom in">+</button>
        <button id="resetZoomBtn" aria-label="Reset zoom">Reset</button>
      </div>
      <button class="modal-close" id="closeImageModalBtn" aria-label="Close image popup">
        ×
      </button>
    </div>

    <div class="image-modal-inner">
      <img id="imageModalImg" src="" alt="" />
    </div>
  </div>
</div>

<script>
  // ------- Image modal setup -------

  const imageModal      = document.getElementById('imageModal');
  const imageModalImg   = document.getElementById('imageModalImg');
  const closeImageBtn   = document.getElementById('closeImageModalBtn');
  const zoomImages      = document.querySelectorAll('.zoom-image');
  const imageModalInner = document.querySelector('.image-modal-inner');

  const zoomInBtn    = document.getElementById('zoomInBtn');
  const zoomOutBtn   = document.getElementById('zoomOutBtn');
  const resetZoomBtn = document.getElementById('resetZoomBtn');

  let currentScale = 0.3;
  const minScale = .5;
  const maxScale = 3;
  const step     = 0.25;

  function applyZoom() {
    imageModalImg.style.transform = `scale(${currentScale})`;

    // only allow scrolling when zoomed in
    if (currentScale <= 1){
      imageModalInner.style.overflow = 'hidden';
      imageModalInner.scrollTop = 0;
      imageModalInner.scrollLeft = 0;
    } else {
      imageModalInner.style.overflow = 'auto';
    }
  }

  // open modal when clicking any image
  zoomImages.forEach(img => {
  img.addEventListener('click', () => {
    imageModalImg.src = img.src;
    imageModalImg.alt = img.alt;
    currentScale = 0.3;  // match the starting scale
    applyZoom();
    imageModal.classList.add('visible');
  });
});


  // close modal with X
  closeImageBtn.addEventListener('click', () => {
    imageModal.classList.remove('visible');
  });

  // close when clicking gray background
  imageModal.addEventListener('click', (e) => {
    if (e.target === imageModal) {
      imageModal.classList.remove('visible');
    }
  });

  // zoom controls
  zoomInBtn.addEventListener('click', () => {
    currentScale = Math.min(maxScale, currentScale + step);
    applyZoom();
  });

  zoomOutBtn.addEventListener('click', () => {
    currentScale = Math.max(minScale, currentScale - step);
    applyZoom();
  });

  resetZoomBtn.addEventListener('click', () => {
    currentScale = 1;
    applyZoom();
  });

  // close modal with Esc
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      imageModal.classList.remove('visible');
    }
  });
</script>

</body>
</html>
